{"version":3,"sources":["index.js","../node_modules/microlight/microlight.js","demo.js"],"names":["Zvezdochki","el","options","ratingEl","activeClass","votes","starDataAttr","ratingDataAttr","votedClassName","voted","Object","assign","init","star","voteEvent","CustomEvent","detail","dispatchEvent","setRating","blockVotes","handleHover","addClickHandler","classList","add","initialRating","dataset","toLowerCase","querySelector","stars","querySelectorAll","addEventListener","forEach","remove","ev","preventDefault","stopPropagation","target","submit","require","output","document","innerText"],"mappings":";;;AA0EG,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA1EH,QAAA,gBAEqBA,IAAAA,EAwElB,WAvEWC,SAAAA,EAAAA,EAAIC,GAAS,EAAA,KAAA,GAClBC,KAAAA,SAAWF,EAEXC,KAAAA,QAAU,CACbE,YAAa,SACbC,MAAO,QACPC,aAAc,OACdC,eAAgB,cAChBC,eAAgB,uBAChBC,OAAO,GAGLR,GAAMC,IACHA,KAAAA,QAAUQ,OAAOC,OAAO,KAAKT,QAASA,IAGxCU,KAAAA,OAuDN,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,SAnDMC,MAAAA,SAAAA,GACDC,IAAAA,EAAY,IAAIC,YAAY,OAAQ,CAACC,OAAQH,IAC5CV,KAAAA,SAASc,cAAcH,KAiD7B,CAAA,IAAA,OA9CM,MAAA,WACAI,KAAAA,YAEA,KAAKhB,QAAQO,MAIXU,KAAAA,cAHAC,KAAAA,cACAC,KAAAA,qBAyCR,CAAA,IAAA,aAnCY,MAAA,WACNlB,KAAAA,SAASmB,UAAUC,IAAI,KAAKrB,QAAQM,gBACpCN,KAAAA,QAAQO,OAAQ,IAiCtB,CAAA,IAAA,YA9BW,MAAA,WACNe,IAAAA,EAAgB,KAAKrB,SAASsB,QAAQ,KAAKvB,QAAQK,eAAemB,eACvD,KAAKvB,SAASwB,cAAc,UAAY,KAAKzB,QAAQI,aAAe,KAAOkB,EAAgB,MACjGF,UAAUC,IAAI,KAAKrB,QAAQE,eA2BrC,CAAA,IAAA,cAxBa,MAAA,WAAA,IAAA,EAAA,KACRwB,EAAQ,KAAKzB,SAAS0B,iBAAiB,SAAW,KAAK3B,QAAQI,aAAe,KAC7EH,KAAAA,SAAS2B,iBAAiB,aAAc,WAC3CF,EAAMG,QAAQ,SAAA9B,GACZA,EAAGqB,UAAUU,OAAO,EAAK9B,QAAQE,iBAGhCD,KAAAA,SAAS2B,iBAAiB,aAAc,WAC3C,EAAKZ,gBAgBR,CAAA,IAAA,kBAZiB,MAAA,WAAA,IAAA,EAAA,KACXf,KAAAA,SAAS2B,iBAAiB,QAAS,SAAAG,GACtCA,EAAGC,iBACHD,EAAGE,kBAECF,EAAGG,OAAOX,QAAQ,EAAKvB,QAAQI,gBAAkB,EAAKJ,QAAQO,QAChEwB,EAAGG,OAAOd,UAAUC,IAAI,EAAKrB,QAAQE,aACrC,EAAKiC,OAAOJ,EAAGG,OAAOX,QAAQ,EAAKvB,QAAQI,eAE3C,EAAKa,oBAGV,EAAA,GAAA,QAAA,QAAA;;;AC1EH,IAAA,GAAA,SAAA,EAAA,GAAA,mBAAA,GAAA,EAAA,IAAA,EAAA,CAAA,WAAA,GAAA,EAAA,oBAAA,QAAA,QAAA,EAAA,WAAA,IAAA,CAAA,KAAA,SAAA,GAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,SAAA,EAAA,cAAA,EAAA,OAAA,EAAA,gBAAA,EAAA,YAAA,EAAA,YAAA,EAAA,YAAA,EAAA,IAAA,EAAA,SAAA,GAAA,IAAA,EAAA,EAAA,uBAAA,GAAA,cAAA,EAAA,EAAA,EAAA,EAAA,MAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,YAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,UAAA,GAAA,EAAA,EAAA,EAAA,kCAAA,KAAA,EAAA,iBAAA,GAAA,OAAA,EAAA,WAAA,EAAA,GAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,MAAA,EAAA,EAAA,GAAA,CAAA,GAAA,EAAA,EAAA,EAAA,IAAA,GAAA,EAAA,EAAA,OAAA,GAAA,GAAA,EAAA,GAAA,MAAA,GAAA,CAAA,KAAA,GAAA,GAAA,EAAA,GAAA,QAAA,GAAA,IAAA,KAAA,GAAA,MAAA,IAAA,EAAA,KAAA,GAAA,EAAA,KAAA,GAAA,EAAA,EAAA,EAAA,GAAA,EAAA,GAAA,SAAA,EAAA,GAAA,MAAA,GAAA,IAAA,IAAA,EAAA,GAAA,EAAA,EAAA,cAAA,SAAA,aAAA,QAAA,CAAA,GAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,KAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,EAAA,EAAA,EAAA,qBAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,07BAAA,GAAA,GAAA,IAAA,EAAA,GAAA,EAAA,eAAA,KAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,IAAA,CAAA,EAAA,8BAAA,GAAA,GAAA,QAAA,GAAA,GAAA,QAAA,GAAA,GAAA,KAAA,GAAA,EAAA,GAAA,KAAA,EAAA,KAAA,EAAA,KAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,IAAA,UAAA,EAAA,GAAA,KAAA,EAAA,GAAA,KAAA,KAAA,KAAA,KAAA,GAAA,IAAA,EAAA,MAAA,EAAA,YAAA,EAAA,WAAA,IAAA,EAAA,iBAAA,OAAA,WAAA,KAAA;;ACKA,aALA,QAAA,eACA,IAAA,EAAA,EAAA,QAAA,YAIA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAFAmB,QAAQ,cAER,WACMC,IAAAA,EAASC,SAASb,cAAc,YAEhCxB,EAAWqC,SAASb,cAAc,gBAElC3B,IAAAA,EAAJ,QAAeG,GAEfA,EAAS2B,iBAAiB,OAAQ,SAAAG,GAChCM,EAAOE,UAAY,aAAeR,EAAGjB,SARzC","file":"demo.d3b53871.js","sourceRoot":"../src","sourcesContent":["import \"./index.scss\";\n\nexport default class Zvezdochki {\n  constructor(el, options) {\n    this.ratingEl = el;\n\n    this.options = {\n      activeClass: \"active\",\n      votes: \"votes\",\n      starDataAttr: \"star\",\n      ratingDataAttr: \"ratingValue\",\n      votedClassName: 'star-rating--blocked',\n      voted: false\n    };\n\n    if (el && options) {\n      this.options = Object.assign(this.options, options)\n    }\n\n    this.init();\n\n  }\n\n  submit(star) {\n    let voteEvent = new CustomEvent('vote', {detail: star});\n    this.ratingEl.dispatchEvent(voteEvent);\n  }\n\n  init() {\n    this.setRating();\n\n    if (!this.options.voted) {\n      this.handleHover();\n      this.addClickHandler();\n    } else {\n      this.blockVotes();\n    }\n  }\n\n  blockVotes() {\n    this.ratingEl.classList.add(this.options.votedClassName);\n    this.options.voted = true;\n  }\n\n  setRating() {\n    let initialRating = this.ratingEl.dataset[this.options.ratingDataAttr.toLowerCase()];\n    let activeEl = this.ratingEl.querySelector('*[data-' + this.options.starDataAttr + '=\"' + initialRating + '\"]')\n    activeEl.classList.add(this.options.activeClass);\n  }\n\n  handleHover() {\n    let stars = this.ratingEl.querySelectorAll(\"[data-\" + this.options.starDataAttr + \"]\");\n    this.ratingEl.addEventListener(\"mouseenter\", () => {\n      stars.forEach(el => {\n        el.classList.remove(this.options.activeClass)\n      })\n    });\n    this.ratingEl.addEventListener(\"mouseleave\", () => {\n      this.setRating()\n    })\n  }\n\n  addClickHandler() {\n    this.ratingEl.addEventListener('click', ev => {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      if (ev.target.dataset[this.options.starDataAttr] && !this.options.voted) {\n        ev.target.classList.add(this.options.activeClass);\n        this.submit(ev.target.dataset[this.options.starDataAttr]);\n\n        this.blockVotes();\n      }\n    });\n  }\n}\n\n","!function(e,t){\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(\"undefined\"!=typeof exports?exports:e.microlight={})}(this,function(e){var t,n,i,o=window,r=document,a=\"appendChild\",l=\"test\",c=\";text-shadow:\",s=\"opacity:.\",d=\" 0px 0px \",u=\"3px 0px 5\",f=\")\",p=function(e){for(n=r.getElementsByClassName(e||\"microlight\"),t=0;i=n[t++];)for(var p,h,g,m,y,x=i.textContent,b=0,w=x[0],v=1,k=i.innerHTML=\"\",C=0,N=/(\\d*\\, \\d*\\, \\d*)(, ([.\\d]*))?/g.exec(o.getComputedStyle(i).color),E=\"px rgba(\"+N[1]+\",\",S=N[3]||1;h=p,p=7>C&&\"\\\\\"==p?1:v;){if(v=w,w=x[++b],m=k.length>1,!v||C>8&&\"\\n\"==v||[/\\S/[l](v),1,1,!/[$\\w]/[l](v),(\"/\"==p||\"\\n\"==p)&&m,'\"'==p&&m,\"'\"==p&&m,x[b-4]+h+p==\"-->\",h+p==\"*/\"][C])for(k&&(i[a](y=r.createElement(\"span\")).setAttribute(\"style\",[\"\",c+d+9+E+.7*S+\"),\"+d+2+E+.4*S+f,s+6+c+d+7+E+S/4+\"),\"+d+3+E+S/4+f,s+7+c+u+E+S/5+\"),-\"+u+E+S/5+f,\"font-style:italic;\"+s+5+c+u+E+S/4+\"),-\"+u+E+S/4+f][C?3>C?2:C>6?4:C>3?3:+/^(a(bstract|lias|nd|rguments|rray|s(m|sert)?|uto)|b(ase|egin|ool(ean)?|reak|yte)|c(ase|atch|har|hecked|lass|lone|ompl|onst|ontinue)|de(bugger|cimal|clare|f(ault|er)?|init|l(egate|ete)?)|do|double|e(cho|ls?if|lse(if)?|nd|nsure|num|vent|x(cept|ec|p(licit|ort)|te(nds|nsion|rn)))|f(allthrough|alse|inal(ly)?|ixed|loat|or(each)?|riend|rom|unc(tion)?)|global|goto|guard|i(f|mp(lements|licit|ort)|n(it|clude(_once)?|line|out|stanceof|t(erface|ernal)?)?|s)|l(ambda|et|ock|ong)|m(icrolight|odule|utable)|NaN|n(amespace|ative|ext|ew|il|ot|ull)|o(bject|perator|r|ut|verride)|p(ackage|arams|rivate|rotected|rotocol|ublic)|r(aise|e(adonly|do|f|gister|peat|quire(_once)?|scue|strict|try|turn))|s(byte|ealed|elf|hort|igned|izeof|tatic|tring|truct|ubscript|uper|ynchronized|witch)|t(emplate|hen|his|hrows?|ransient|rue|ry|ype(alias|def|id|name|of))|u(n(checked|def(ined)?|ion|less|signed|til)|se|sing)|v(ar|irtual|oid|olatile)|w(char_t|hen|here|hile|ith)|xor|yield)$/[l](k):0]),y[a](r.createTextNode(k))),g=C&&7>C?C:g,k=\"\",C=11;![1,/[\\/{}[(\\-+*=<>:;|\\\\.,?!&@~]/[l](v),/[\\])]/[l](v),/[$\\w]/[l](v),\"/\"==v&&2>g&&\"<\"!=p,'\"'==v,\"'\"==v,v+w+x[b+1]+x[b+2]==\"<!--\",v+w==\"/*\",v+w==\"//\",\"#\"==v][--C];);k+=v}};e.reset=p,\"complete\"==r.readyState?p():o.addEventListener(\"load\",function(){p()},0)});","import \"./demo.scss\";\nimport Zvezdochki from \"./index\";\n\nrequire(\"microlight\");\n\n(function BasicUsage() {\n  let output = document.querySelector('.output1');\n\n  let ratingEl = document.querySelector(\".star-rating\");\n\n  new Zvezdochki(ratingEl);\n\n  ratingEl.addEventListener(\"vote\", ev => {\n    output.innerText = \"Clicked = \" + ev.detail;\n  });\n})();\n"]}